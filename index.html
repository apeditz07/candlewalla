<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Candle Walla ğŸ“Š</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      text-align: center;
      background-color: #ffffff;
      color: #000000;
      transition: background 0.3s, color 0.3s;
    }
    select, button {
      margin: 10px;
      padding: 10px;
      font-size: 16px;
    }
    .lang-switch, .mode-switch, .footer {
      margin-top: 20px;
    }
    #prediction {
      font-size: 18px;
      margin-top: 20px;
      padding: 10px;
      border-radius: 8px;
      background-color: #eef;
      display: inline-block;
    }
    #learn {
      margin-top: 30px;
      background: #f4f4f4;
      padding: 15px;
      border-radius: 8px;
    }
    .dark-mode {
      background-color: #1e1e1e;
      color: #ffffff;
    }
    .dark-mode #prediction {
      background-color: #333;
    }
    .footer {
      font-size: 14px;
      color: gray;
      margin-top: 40px;
    }
  </style>
</head>
<body>

  <h1 id="title">Candle Walla ğŸ“Š</h1>

  <!-- Device View Mode -->
  <div class="mode-switch">
    <label>View Mode:</label>
    <select id="deviceMode" onchange="loadChart()">
      <option value="auto">Auto</option>
      <option value="mobile">Mobile</option>
      <option value="desktop">Desktop</option>
    </select>

    <!-- Theme Toggle -->
    <button onclick="toggleTheme()">ğŸŒ/ğŸŒ™</button>
  </div>

  <!-- Stock Selector -->
  <div>
    <select id="symbolSelector" onchange="loadChart()">
      <option value="NSE:NIFTY">NIFTY</option>
      <option value="NSE:BANKNIFTY">BANKNIFTY</option>
      <option value="NSE:RELIANCE">Reliance</option>
      <option value="NSE:TCS">TCS</option>
      <option value="NSE:INFY">Infosys</option>
    </select>
  </div>

  <!-- Chart Display -->
  <div class="tradingview-widget-container">
    <div id="tradingview_0f5a2"></div>
  </div>

  <!-- Language Switch -->
  <div class="lang-switch">
    <button onclick="setLang('en')">English</button>
    <button onclick="setLang('hi')">à¤¹à¤¿à¤‚à¤¦à¥€</button>
  </div>

  <!-- Prediction Section -->
  <div id="prediction">Click stock to get AI prediction...</div>

  <!-- Learn Stocks Link -->
  <div id="learn">
    <h2 id="learn-title">ğŸ“š Learn Stocks</h2>
    <p id="learn-text">ğŸ‘‰ <a href="learn.html" target="_blank">Click here to start learning with videos</a></p>
  </div>

  <!-- Footer -->
  <div class="footer">
    Made by Candle Walla Team Â© 2025 | <a href="about.html" target="_blank">About</a>
  </div>

  <!-- Scripts -->
  <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
  <script>
    let widget;
    let isDark = false;

    function loadChart() {
      const symbol = document.getElementById("symbolSelector").value;
      const mode = document.getElementById("deviceMode").value;

      let height = 500;
      if (mode === 'mobile') height = 350;
      else if (mode === 'desktop') height = 600;

      if (widget) widget.remove();

      widget = new TradingView.widget({
        "width": "100%",
        "height": height,
        "symbol": symbol,
        "interval": "15",
        "timezone": "Asia/Kolkata",
        "theme": isDark ? "dark" : "light",
        "style": "1",
        "locale": "en",
        "toolbar_bg": "#f1f3f6",
        "enable_publishing": false,
        "hide_top_toolbar": false,
        "save_image": false,
        "container_id": "tradingview_0f5a2"
      });

      predictNextCandle(symbol);
    }

    function setLang(lang) {
      const isHindi = lang === 'hi';
      document.getElementById("title").innerText = isHindi ? "à¤•à¥ˆà¤‚à¤¡à¤² à¤µà¤¾à¤²à¤¾ ğŸ“Š" : "Candle Walla ğŸ“Š";
      document.getElementById("learn-title").innerText = isHindi ? "à¤¸à¥à¤Ÿà¥‰à¤• à¤¸à¥€à¤–à¥‡à¤‚" : "ğŸ“š Learn Stocks";
      document.getElementById("learn-text").innerHTML = isHindi 
        ? 'ğŸ‘‰ <a href="learn.html" target="_blank">à¤¶à¥‡à¤¯à¤° à¤¬à¤¾à¤œà¤¾à¤° à¤µà¥€à¤¡à¤¿à¤¯à¥‹ à¤¸à¥€à¤–à¥‡à¤‚</a>' 
        : 'ğŸ‘‰ <a href="learn.html" target="_blank">Click here to start learning with videos</a>';
    }

    function toggleTheme() {
      isDark = !isDark;
      document.body.classList.toggle("dark-mode");
      loadChart();
    }

    function predictNextCandle(symbol) {
      // Fake AI for now
      const predictions = {
        "NSE:NIFTY": "ğŸ”¼ Bullish - Strong Buying",
        "NSE:BANKNIFTY": "ğŸ”½ Bearish - Wait & Watch",
        "NSE:RELIANCE": "ğŸ”¼ Bullish - Positive News",
        "NSE:TCS": "ğŸ”½ Bearish - IT Weak",
        "NSE:INFY": "ğŸ”¼ Bullish - Technical Breakout"
      };
      const result = predictions[symbol] || "ğŸ“‰ Neutral";
      document.getElementById("prediction").innerText = `AI Prediction: ${result}`;
    }

    window.addEventListener('DOMContentLoaded', loadChart);
  </script>
</body>
</html>
