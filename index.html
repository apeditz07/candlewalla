<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Candle Walla</title>
  <link rel="stylesheet" href="styles.css" />
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      text-align: center;
    }
    select, button {
      margin: 10px;
      padding: 10px;
      font-size: 16px;
    }
    .lang-switch {
      margin-top: 20px;
    }
    #learn {
      margin-top: 30px;
      background: #f4f4f4;
      padding: 15px;
      border-radius: 8px;
    }
    #prediction {
      margin-top: 15px;
      font-weight: bold;
      font-size: 18px;
    }
  </style>
</head>
<body>

  <h1 id="title">Candle Walla ðŸ“Š</h1>

  <div>
    <select id="symbolSelector" onchange="loadChart()">
      <option value="NSE:NIFTY">NIFTY</option>
      <option value="NSE:BANKNIFTY">BANKNIFTY</option>
      <option value="NSE:RELIANCE">Reliance</option>
      <option value="NSE:TCS">TCS</option>
      <option value="NSE:INFY">Infosys</option>
    </select>
  </div>

  <div class="tradingview-widget-container">
    <div id="tradingview_0f5a2"></div>
  </div>

  <!-- ðŸ”® Prediction Feature -->
  <div>
    <button onclick="predictCandle()">ðŸ”® Predict Next Candle</button>
    <div id="prediction">Click the button for a prediction!</div>
  </div>

  <!-- ðŸŒ Language Switch -->
  <div class="lang-switch">
    <button onclick="setLang('en')">English</button>
    <button onclick="setLang('hi')">à¤¹à¤¿à¤‚à¤¦à¥€</button>
  </div>

  <!-- ðŸ“˜ Learn Section -->
  <div id="learn">
    <h2 id="learn-title">Learn Stocks</h2>
    <p id="learn-text">See chart and prediction below.</p>
  </div>

  <!-- ðŸ“ˆ TradingView Script -->
  <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
  <script type="text/javascript">
    let widget;

    function loadChart() {
      const symbol = document.getElementById("symbolSelector").value;
      if (widget) widget.remove();

      widget = new TradingView.widget({
        "width": "100%",
        "height": 500,
        "symbol": symbol,
        "interval": "15",
        "timezone": "Asia/Kolkata",
        "theme": "light",
        "style": "1",
        "locale": "en",
        "toolbar_bg": "#f1f3f6",
        "enable_publishing": false,
        "hide_top_toolbar": false,
        "save_image": false,
        "container_id": "tradingview_0f5a2"
      });
    }

    window.addEventListener('DOMContentLoaded', loadChart);

    function setLang(lang) {
      const isHindi = lang === 'hi';

      document.getElementById("title").innerText = isHindi ? "à¤•à¥ˆà¤‚à¤¡à¤² à¤µà¤¾à¤²à¤¾ ðŸ“Š" : "Candle Walla ðŸ“Š";
      document.getElementById("learn-title").innerText = isHindi ? "à¤¸à¥à¤Ÿà¥‰à¤• à¤¸à¥€à¤–à¥‡à¤‚" : "Learn Stocks";
      document.getElementById("learn-text").innerText = isHindi
        ? "à¤¨à¥€à¤šà¥‡ à¤šà¤¾à¤°à¥à¤Ÿ à¤”à¤° à¤­à¤µà¤¿à¤·à¥à¤¯à¤µà¤¾à¤£à¥€ à¤¦à¥‡à¤–à¥‡à¤‚à¥¤"
        : "See chart and prediction below.";

      const selector = document.getElementById("symbolSelector");
      selector.options[0].text = isHindi ? "à¤¨à¤¿à¤«à¥à¤Ÿà¥€" : "NIFTY";
      selector.options[1].text = isHindi ? "à¤¬à¥ˆà¤‚à¤• à¤¨à¤¿à¤«à¥à¤Ÿà¥€" : "BANKNIFTY";
      selector.options[2].text = isHindi ? "à¤°à¤¿à¤²à¤¾à¤¯à¤‚à¤¸" : "Reliance";
      selector.options[3].text = isHindi ? "à¤Ÿà¥€à¤¸à¥€à¤à¤¸" : "TCS";
      selector.options[4].text = isHindi ? "à¤‡à¤¨à¥à¤«à¥‹à¤¸à¤¿à¤¸" : "Infosys";

      predictCandle(); // Refresh prediction text on language change
    }

    function predictCandle() {
      const prediction = Math.random() > 0.5 ? "UP ðŸ”¼" : "DOWN ðŸ”½";
      const isHindi = document.getElementById("title").innerText.includes("à¤•à¥ˆà¤‚à¤¡à¤²");
      const message = isHindi
        ? `à¤…à¤—à¤²à¥€ à¤•à¥ˆà¤‚à¤¡à¤² à¤¶à¤¾à¤¯à¤¦ ${prediction === "UP ðŸ”¼" ? "à¤Šà¤ªà¤° ðŸ”¼" : "à¤¨à¥€à¤šà¥‡ ðŸ”½"} à¤œà¤¾ à¤¸à¤•à¤¤à¥€ à¤¹à¥ˆà¥¤`
        : `Next candle may go ${prediction}`;

      document.getElementById("prediction").innerText = message;
    }
  </script>
</body>
</html>
